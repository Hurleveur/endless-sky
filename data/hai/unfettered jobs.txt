# Copyright (c) 2021 by Hurleveur
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU General Public License for more details.


# make the amount random
mission "Unfettered Silicon Asteroid Mining"
	name `Gather silicon from asteroids`
	description `Mine and then collect 50 tons of Silicon from the asteroid field in Wah Yoot and then bring them back to <destination> for <payment>.`
	job
	repeat
	source "Darkcloak"
	to offer
		has "First Contact: Unfettered: declined"
		random < 70
	on complete
		payment 250000
		dialog `The Unfettered seem happy when they speak,	"This will allow us to repair our ships !"	They hand you <payment> credits.`
		outfit "Silicon" -50



mission "Unfettered Silver Asteroid Mining"
	name `Gather silver from asteroids`
	description `Mine and then collect 20 tons of Silver from the asteroid field in Ehma Ti and then bring them back to <destination> for <payment>.`
	job
	repeat
	source "Darkcloak"
	waypoint "Ehma Ti"
	to offer
		has "First Contact: Unfettered: declined"
		random < 70
	on complete
		payment 400000
		dialog `The Unfettered seem satisfied when they speak,	"This will allow us to repair our ships !"	They hand you <payment> credits.`
		outfit "Silver" -20



mission "Unfettered Medicals"
	name `Hai medicals to <planet>`
	description `The Unfettered hospitals on Darkcloak are in urgent need of resupply. Collect a supply of <tons> of medicals from <stopovers>, and bring it to the Unfettered on <destination> by <date> for <payment>.`
	job
	repeat
	deadline 10 1
	source "Darkcloak"
	to offer
		has "Unfettered Jump Drive 1: offered"
		random < 80
	cargo "medicals" 15 2 .05
	stopover
		distance 5 7
		government "Hai"
		attributes "spaceport"
	on visit
		dialog phrase "generic cargo on visit"
	on stopover
		dialog phrase `You are surprised to see the Hai are more than happy to give you the medical supplies needed. "Tell our brothers are sisters to stay strong,"	they say to you.`
	on complete
		payment 10000 4000
		dialog `The local health specialists seem relieved to learn that you have managed to bring the medical supplies back in time.`



mission "Darkcloak Ship Materials"
	name `Ship materials from <stopovers>`
	description `The Shipyards of <origin> are in grave need of supplies. Go to the pirate world of <destination> to get materials to build new ships, and bring them back by <date> for <payment>.`
	job
	repeat
	deadline 15 1
	source `Darkcloak`
	cargo "ship materials" 50 15 .015 
	to offer
		random < 50
		has "Unfettered Jump Drive 3: done"
		has "Unfettered: The War Has Started"
	stopover
		distance 12 18
		government "Pirate"
	on stopover
		dialog `After some search you manage to find shady individuals who seem anxious not to be seen. You go to a quiet place to proceed to the exchange, and later find the materials at the agreed location. Now go back to <origin>.`
	on visit
		dialog phrase "generic cargo on visit"
	on complete
		payment 50000 7000
		dialog `The Unfettered promise you many new ships will be built with these <cargo>, grandiose ships. As long as you get your <payment>, that seems good to you.`



mission "Unfettered Challenge[0]"
	name `Defeat the young captain`
	description `A young Unfettered captain has provoked you in a duel, disable his ship for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	to offer
		has "Unfettered Jump Drive 2: offered"
		random < 70
	npc save disable
		government "Hai (Unfettered Challenge)"
		personality disables staying heroic target
		fleet
			names "hai"
			variant
				"Lightning Bug (Pulse)" 2
			dialog `Raaaah... Well you have beaten me alright...`
	on complete
		payment 200000
		dialog `You receive a message from the <npc> : "Here is the agreed <payment>, captain."`



mission "Unfettered Challenge[1]"
	name `Defeat the captain`
	description `An Unfettered captain has provoked you in a duel, disable his ship for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	to offer
		has "Unfettered Jump Drive 2: offered"
		random < 50
	npc save disable
		government "Hai (Unfettered Challenge)"
		personality disables staying heroic target
		fleet
			names "hai"
			variant
				"Lightning Bug (Pulse)" 4
			dialog `Well done captain ! But I will not be so easy to beat next time.`
	on complete
		payment 400000
		dialog `You receive a message from the <npc> : "Here is the agreed <payment>, captain. You deserve it."`



mission "Experienced Unfettered Challenge[2]"
	name `Defeat the experienced captain`
	description `An experienced Unfettered captain has provoked you in a duel, disable his ship for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	to offer
		has "Unfettered Jump Drive 3: offered"
		random < 40
	npc save disable
		government "Hai (Unfettered Challenge)"
		personality disables staying heroic target
		fleet
			names "hai"
			variant
				"Shield Beetle (Pulse)" 2
			dialog `You seem to learn from our encounters as well... Well next time it will be different.`
	on complete
		payment 600000
		dialog `You receive a message from the <npc> : "Here is the agreed <payment>, captain. Hopefully it allows you to improve the <ship> before our next battle..."`



mission "Get Jump Drive"
	name `Bring a jump drive back`
	description `Go to the pirate world of <destination> and recover a jump drive from a vault for <payment>.`
	job
	repeat
	source
		attributes "unfettered"
	to offer
		random < 85
		has "Unfettered: Prove your strength 2: done"
	stopover
		distance 12 18
		government "Pirate"
	on stopover
		dialog `You manage to land and retrieve the jump drive without too much trouble. Do not rely on your luck too much though, you better depart quickly !`
		outfit "Jump Drive"
	on visit
		dialog `You have a mission to bring a jump drive here. You may have left your escort allocated to carrying the jump drive behind, in which case you better launch and wait for it.`
	on complete
		payment 1000000
		outfit "Jump Drive" -1
		dialog `The Unfettered are more than content with giving you these <payment> in exchange for your precious cargo.`



mission "Bring True Hai"
	name `Bring True Hai`
	description `Land on <stopovers> and bring back <bunks> True Hai to where they belong, on <origin> for <payment>.`
	job
	repeat
	passengers 5 8 .2
	source
		attributes "unfettered"
	to offer
		random < 75
		has "Unfettered: The Word Has Spread: done"
	stopover
		distance 3 6
		government "Hai"
		attributes "spaceport"
	on stopover
		dialog `You have picked up all <bunks> Hai, now all that is left is to bring them to <destination>.`
	on complete
		payment
		payment 150000
		dialog `You feel good that you managed to bring these Hai to their True home. The Unfettered hand you the agree payment of <payment>.`